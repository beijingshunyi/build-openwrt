# äº¬ä¸œäº‘AX1800 Pro OpenWrt å›ºä»¶ç¼–è¯‘ï¼ˆå¸¦å…¨å±€é€æ˜Žä»£ç†ï¼‰
æœ¬ä»“åº“ç”¨äºŽç¼–è¯‘äº¬ä¸œäº‘AX1800 Proè·¯ç”±å™¨çš„OpenWrtå›ºä»¶ï¼Œå†…ç½®PassWallå®žçŽ°**å…¨å±€é€æ˜Žä»£ç†**ï¼Œæ”¯æŒTCP/UDPå…¨åè®®ä»£ç†ã€å¤§é™†IPç»•è¿‡ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ðŸ”¥ å›ºä»¶ç‰¹æ€§
- é€‚é…è®¾å¤‡ï¼šäº¬ä¸œäº‘AX1800 Proï¼ˆipq60xxæž¶æž„ï¼‰
- æ ¸å¿ƒåŠŸèƒ½ï¼šå…¨å±€é€æ˜Žä»£ç†ï¼ˆTCP/UDPï¼‰ã€PassWallä»£ç†é¢æ¿ã€å¤§é™†IPåº“ç»•è¿‡
- ä»£ç†åè®®ï¼šæ”¯æŒV2Ray/Xray/SS/SSR/Hysteria/Sing-boxç­‰ä¸»æµåè®®
- ç³»ç»Ÿä¼˜åŒ–ï¼šç²¾ç®€æ— ç”¨æ’ä»¶ï¼Œä»…ä¿ç•™æ ¸å¿ƒä»£ç†+åŸºç¡€åŠŸèƒ½

## ðŸš€ å¿«é€Ÿå¼€å§‹
### 1. ç¼–è¯‘å›ºä»¶ï¼ˆGitHub Actionsï¼‰
#### æ­¥éª¤1ï¼šForkæœ¬ä»“åº“
ç‚¹å‡»ä»“åº“å³ä¸Šè§’ã€ŒForkã€ï¼Œå°†ä»“åº“å¤åˆ¶åˆ°ä½ çš„GitHubè´¦å·ã€‚

#### æ­¥éª¤2ï¼šå¯åŠ¨ç¼–è¯‘
1. è¿›å…¥ä½ ForkåŽçš„ä»“åº“ â†’ ç‚¹å‡»ã€ŒActionsã€â†’ é€‰æ‹©ã€ŒBuild OpenWrtã€ï¼›
2. ç‚¹å‡»ã€ŒRun workflowã€â†’ ç¡®è®¤è®¾å¤‡åž‹å·ä¸º`jdcloud_ax1800-pro` â†’ ç‚¹å‡»ã€ŒRun workflowã€ï¼›
3. ç­‰å¾…ç¼–è¯‘å®Œæˆï¼ˆçº¦1-2å°æ—¶ï¼‰ï¼Œåœ¨ã€ŒArtifactsã€ä¸­ä¸‹è½½å›ºä»¶ã€‚

### 2. åˆ·å…¥å›ºä»¶
#### å‰ç½®æ¡ä»¶
- äº¬ä¸œäº‘AX1800 Proå·²è§£é”SSH/åˆ·å…¥Breedï¼›
- å›ºä»¶æ ¼å¼ï¼šé€‰æ‹©`openwrt-ipq60xx-generic-jdcloud_ax1800-pro-squashfs-sysupgrade.bin`ã€‚

#### åˆ·å…¥æ­¥éª¤
1. è¿›å…¥Breed Webç•Œé¢ï¼ˆè·¯ç”±å™¨æ–­ç”µâ†’æŒ‰ä½å¤ä½é”®â†’é€šç”µâ†’è®¿é—®192.168.1.1ï¼‰ï¼›
2. é€‰æ‹©ã€Œå›ºä»¶æ›´æ–°ã€â†’ ä¸Šä¼ ç¼–è¯‘å¥½çš„å›ºä»¶ â†’ ç‚¹å‡»ã€Œæ›´æ–°ã€ï¼›
3. ç­‰å¾…é‡å¯ï¼ˆçº¦2åˆ†é’Ÿï¼‰ï¼Œè®¿é—®`192.168.1.1`è¿›å…¥OpenWrtåŽå°ã€‚

### 3. é…ç½®å…¨å±€é€æ˜Žä»£ç†
#### æ­¥éª¤1ï¼šè¿›å…¥PassWallé¢æ¿
OpenWrtåŽå° â†’ æœåŠ¡ â†’ PassWall

#### æ­¥éª¤2ï¼šæ·»åŠ ä»£ç†èŠ‚ç‚¹
1. ç‚¹å‡»ã€ŒèŠ‚ç‚¹åˆ—è¡¨ã€â†’ ã€Œæ·»åŠ ã€ï¼›
2. é€‰æ‹©ä»£ç†ç±»åž‹ï¼ˆå¦‚V2Ray/Xrayï¼‰â†’ å¡«å†™èŠ‚ç‚¹ä¿¡æ¯ï¼ˆåœ°å€ã€ç«¯å£ã€å¯†é’¥ç­‰ï¼‰â†’ ä¿å­˜ï¼›
3. ç‚¹å‡»ã€Œæµ‹è¯•ã€ï¼Œç¡®è®¤èŠ‚ç‚¹å¯è¿žæŽ¥ã€‚

#### æ­¥éª¤3ï¼šé…ç½®å…¨å±€é€æ˜Žä»£ç†
1. ç‚¹å‡»ã€Œå…¨å±€è®¾ç½®ã€â†’ ã€Œé€æ˜Žä»£ç†ã€ï¼›
   - å¯ç”¨ã€ŒTCPé€æ˜Žä»£ç†ã€ï¼šé€‰æ‹©ã€ŒTProxyã€æ¨¡å¼ï¼›
   - å¯ç”¨ã€ŒUDPé€æ˜Žä»£ç†ã€ï¼šé€‰æ‹©ã€ŒSing-boxã€æ¨¡å¼ï¼›
2. ç‚¹å‡»ã€Œè®¿é—®æŽ§åˆ¶ã€â†’ ã€Œå¤§é™†IPç»•è¿‡ã€ï¼šå¯ç”¨ï¼ˆé¿å…å›½å†…ç½‘ç«™èµ°ä»£ç†ï¼‰ï¼›
3. ç‚¹å‡»ã€Œåº”ç”¨è®¾ç½®ã€ï¼Œé‡å¯PassWallæœåŠ¡ã€‚

#### æ­¥éª¤4ï¼šéªŒè¯ä»£ç†
1. è·¯ç”±å™¨è¿žæŽ¥è®¾å¤‡ï¼ˆç”µè„‘/æ‰‹æœºï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ä»£ç†ï¼›
2. è®¿é—®IPæŸ¥è¯¢ç½‘ç«™ï¼Œç¡®è®¤IPä¸ºä»£ç†èŠ‚ç‚¹IPï¼›
3. è®¿é—®å¤–ç½‘ç½‘ç«™ï¼ŒéªŒè¯å¯æ­£å¸¸è®¿é—®ã€‚

## âš™ï¸ è‡ªå®šä¹‰é…ç½®
### 1. ä¿®æ”¹ä»£ç†è§„åˆ™
- è·¯å¾„ï¼š`/etc/config/passwall` â†’ å¯è‡ªå®šä¹‰ä»£ç†è§„åˆ™ã€ç»•è¿‡IPæ®µï¼›
- æŽ¨èï¼šå°†å¸¸ç”¨ç½‘ç«™åŠ å…¥ã€Œç›´è¿žåˆ—è¡¨ã€ï¼Œæå‡è®¿é—®é€Ÿåº¦ã€‚

### 2. é¢„ç½®å¼€æœºè‡ªå¯ä»£ç†
åˆ›å»º`files/etc/config/passwall`æ–‡ä»¶ï¼Œå†™å…¥ä½ çš„èŠ‚ç‚¹é…ç½®ï¼Œç¼–è¯‘åŽå›ºä»¶ä¼šè‡ªåŠ¨åŠ è½½ã€‚

## â— å¸¸è§é—®é¢˜
### 1. ç¼–è¯‘å¤±è´¥
- åŽŸå› ï¼šGitHub Actionsèµ„æºé™åˆ¶/ä¾èµ–ä¸‹è½½å¤±è´¥ï¼›
- è§£å†³ï¼šé‡æ–°å¯åŠ¨ç¼–è¯‘ï¼Œæˆ–æœ¬åœ°ç¼–è¯‘ï¼ˆè§ä¸‹æ–¹æœ¬åœ°ç¼–è¯‘æŒ‡å—ï¼‰ã€‚

### 2. ä»£ç†æ— æ³•ç”Ÿæ•ˆ
- æ£€æŸ¥ï¼šç¡®è®¤èŠ‚ç‚¹å¯è¿žæŽ¥ã€é€æ˜Žä»£ç†æ¨¡å¼å·²å¯ç”¨ã€iptablesè§„åˆ™å·²ç”Ÿæˆï¼›
- é‡å¯ï¼šé‡å¯PassWallæœåŠ¡ â†’ é‡å¯è·¯ç”±å™¨ã€‚

### 3. UDPä»£ç†å¤±æ•ˆ
- è§£å†³ï¼šç¡®ä¿å·²å®‰è£…`sing-box`æ’ä»¶ï¼Œåœ¨PassWallä¸­é€‰æ‹©ã€ŒSing-boxã€ä½œä¸ºUDPä»£ç†æ¨¡å¼ã€‚

## ðŸ“ æœ¬åœ°ç¼–è¯‘ï¼ˆå¯é€‰ï¼‰
### å‰ç½®çŽ¯å¢ƒ
```bash
# Ubuntu 22.04 ä¾èµ–å®‰è£…
sudo apt update && sudo apt install -y build-essential clang flex bison g++ gawk gcc-multilib g++-multilib gettext git libncurses5-dev libssl-dev python3-setuptools rsync swig unzip zlib1g-dev file wget


ç¼–è¯‘æ­¥éª¤
# å…‹éš†ä»“åº“
git clone https://github.com/ä½ çš„è´¦å·/build-openwrt.git
cd build-openwrt

# å…‹éš†OpenWrtæºç 
git clone --depth=1 --branch openwrt-23.05 https://github.com/immortalwrt/immortalwrt.git openwrt
cd openwrt

# è¿½åŠ PassWallæº
echo "src-git kenzo https://github.com/kenzok8/openwrt-packages.git;master" >> feeds.conf.default
echo "src-git small https://github.com/kenzok8/small.git;master" >> feeds.conf.default

# æ›´æ–°æºå¹¶å®‰è£…
./scripts/feeds update -a && ./scripts/feeds install -a

# åŠ è½½é…ç½®ï¼ˆæ›¿æ¢ä¸ºä½ çš„config.buildinfoè·¯å¾„ï¼‰
cat ../config.buildinfo > .config
make defconfig

# ç¼–è¯‘å›ºä»¶
make download -j1 && make -j$(nproc)
